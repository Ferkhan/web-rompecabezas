<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rompecabezas - Selección de Nivel</title>
    <!-- Estilos Globales (Variables y Base) -->
    <link rel="stylesheet" href="../css/styles.css">
    <!-- Estilos Específicos de esta pantalla -->
    <link rel="stylesheet" href="seleccion.css">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Skip link accesible por teclado -->
    <a class="skip-link" href="#contenido-principal">Saltar al contenido principal</a>

    <!-- ========================================== -->
    <!-- 1. RECURSOS GLOBALES SVG (CRÍTICO PARA LA MASCOTA) -->
    <!-- ========================================== -->
    <svg width="0" height="0" style="position: absolute; overflow: hidden;" aria-hidden="true">
        <defs>
            <!-- Icono de Check para la selección -->
            <symbol id="icon-check" viewBox="0 0 24 24">
                <path fill="currentColor" d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
            </symbol>

            <!-- Gradientes de la Mascota (Copiados del index para que funcionen aquí) -->
            <linearGradient id="globalSuitGradient" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#3B82F6;stop-opacity:1"/><stop offset="50%" style="stop-color:#2563EB;stop-opacity:1"/><stop offset="100%" style="stop-color:#1D4ED8;stop-opacity:1"/></linearGradient>
            <linearGradient id="globalCapeGradient" x1="50%" y1="0%" x2="50%" y2="100%"><stop offset="0%" style="stop-color:#EF4444;stop-opacity:1"/><stop offset="100%" style="stop-color:#991B1B;stop-opacity:1"/></linearGradient>
            <linearGradient id="globalSkinGradient" x1="0%" y1="0%" x2="100%" y2="50%"><stop offset="0%" style="stop-color:#FFE4C4;stop-opacity:1"/><stop offset="100%" style="stop-color:#F5C19B;stop-opacity:1"/></linearGradient>
            <linearGradient id="globalGoldGradient" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#FCD34D;stop-opacity:1"/><stop offset="50%" style="stop-color:#F59E0B;stop-opacity:1"/><stop offset="100%" style="stop-color:#B45309;stop-opacity:1"/></linearGradient>
            <linearGradient id="globalMetalGradient" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#E5E7EB;stop-opacity:1"/><stop offset="50%" style="stop-color:#9CA3AF;stop-opacity:1"/><stop offset="100%" style="stop-color:#4B5563;stop-opacity:1"/></linearGradient>
            <linearGradient id="globalBlueEye" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#60A5FA;stop-opacity:1"/><stop offset="100%" style="stop-color:#2563EB;stop-opacity:1"/></linearGradient>
            <linearGradient id="globalDogFur" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#F59E0B;stop-opacity:1"/><stop offset="100%" style="stop-color:#B45309;stop-opacity:1"/></linearGradient>
            <linearGradient id="globalAltSuit" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#10B981;stop-opacity:1"/><stop offset="100%" style="stop-color:#047857;stop-opacity:1"/></linearGradient>
            <linearGradient id="globalAltCape" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#8B5CF6;stop-opacity:1"/><stop offset="100%" style="stop-color:#5B21B6;stop-opacity:1"/></linearGradient>
            <linearGradient id="globalSkinGradientAlt" x1="0%" y1="0%" x2="100%" y2="50%"><stop offset="0%" style="stop-color:#FFE4C4;stop-opacity:1"/><stop offset="100%" style="stop-color:#F5C19B;stop-opacity:1"/></linearGradient>
        </defs>
    </svg>

    <!-- Fondo -->
    <div class="bg-pattern" aria-hidden="true"></div>

    <!-- Panel Usuario -->
    <div class="user-info-panel" role="complementary" aria-label="Estado de la sesión" aria-hidden="true">
        <div class="info-item"><strong>Usuario invitado</strong></div>
        <div class="info-item">Tiempo: <span id="user-time-display">--</span></div>
        <div class="info-item">Nivel: <span id="user-level-display">--</span></div>
    </div>

    <!-- Contenido Principal -->
    <main class="game-container centered-layout" id="contenido-principal" tabindex="-1">

        <header class="page-header">
            <h1 class="title-cartoon">Selecciona tu imagen</h1>
            <p class="sr-only">Elige la imagen que quieres usar para armar el rompecabezas. Usa Tab para navegar entre las opciones y Enter o Espacio para seleccionar.</p>
        </header>

        <!-- Grilla de Imágenes -->
       <section class="selection-grid" aria-labelledby="titulo-galeria">
            <h2 id="titulo-galeria" class="sr-only">Galería de imágenes disponibles</h2>
            
            <!-- Tarjeta 1: Perrito -->
            <button class="image-card" data-img-url="../assets/images/perro.jpg" aria-label="Perrito: Ilustración de un perrito café claro tierno con collar rojo" aria-pressed="false">
                <img src="../assets/images/perro.jpg" alt="" onerror="this.src='https://placehold.co/400x400?text=Perro'">
                <div class="selection-overlay" aria-hidden="true">
                    <svg class="check-icon" aria-hidden="true"><use xlink:href="#icon-check"></use></svg>
                </div>
                <div class="card-label">Perrito</div>
            </button>

            <!-- Tarjeta 2: Gatito -->
            <button class="image-card" data-img-url="../assets/images/gato.jpg" aria-label="Gatito: Ilustración de un gatito gris con ojos azules brillantes" aria-pressed="false">
                <img src="../assets/images/gato.jpg" alt="" onerror="this.src='https://placehold.co/400x400?text=Gato'">
                <div class="selection-overlay" aria-hidden="true">
                    <svg class="check-icon" aria-hidden="true"><use xlink:href="#icon-check"></use></svg>
                </div>
                <div class="card-label">Gatito</div>
            </button>

            <!-- Tarjeta 3: Paisaje -->
            <button class="image-card" data-img-url="../assets/images/paisaje.jpg" aria-label="Paisaje: Paisaje natural con montañas, río y flores" aria-pressed="false">
                <img src="../assets/images/paisaje.jpg" alt="" onerror="this.src='https://placehold.co/400x400?text=Paisaje'">
                <div class="selection-overlay" aria-hidden="true">
                    <svg class="check-icon" aria-hidden="true"><use xlink:href="#icon-check"></use></svg>
                </div>
                <div class="card-label">Paisaje</div>
            </button>

            <!-- Tarjeta 4: Números -->
            <button class="image-card" data-img-url="../assets/images/numeros.jpg" aria-label="Números: Ilustración educativa de números del 1 al 9 coloridos" aria-pressed="false">
                <img src="../assets/images/numeros.png" alt="" onerror="this.src='https://placehold.co/400x400?text=Numeros'">
                <div class="selection-overlay" aria-hidden="true">
                    <svg class="check-icon" aria-hidden="true"><use xlink:href="#icon-check"></use></svg>
                </div>
                <div class="card-label">Números</div>
            </button>

            <!-- Tarjeta 5: Arte Abstracto/Colores -->
            <button class="image-card" data-img-url="../assets/images/colores.jpg" aria-label="Colores: Arte abstracto con formas geométricas coloridas" aria-pressed="false">
                <img src="../assets/images/colores.jpg" alt="" onerror="this.src='https://placehold.co/400x400?text=Colores'">
                <div class="selection-overlay" aria-hidden="true">
                    <svg class="check-icon" aria-hidden="true"><use xlink:href="#icon-check"></use></svg>
                </div>
                <div class="card-label">Colores</div>
            </button>

            <!-- Tarjeta 6: Héroe -->
            <button class="image-card" data-img-url="../assets/images/heroe.jpg" aria-label="Héroe: Superhéroe con traje azul y capa roja" aria-pressed="false">
                <img src="../assets/images/heroe.jpg" alt="" onerror="this.src='https://placehold.co/400x400?text=Heroe'">
                <div class="selection-overlay" aria-hidden="true">
                    <svg class="check-icon" aria-hidden="true"><use xlink:href="#icon-check"></use></svg>
                </div>
                <div class="card-label">Héroe</div>
            </button>

        </section>

        <!-- Botonera -->
        <div class="actions-container">
            <button class="btn btn-large btn-return" id="btn-back" aria-label="Regresar">Regresar</button>
            <!-- El botón Continuar está deshabilitado por defecto -->
            <button id="btn-continue" class="btn btn-large btn-primary" disabled aria-disabled="true" aria-label="Continuar (se activará al seleccionar una imagen)">
                Continuar
            </button>
        </div>

    </main>

    <!-- Asistente Virtual -->
    <aside class="mascot-section">
        <div class="speech-bubble" id="mascot-text" role="status" aria-live="polite">
            ¡Elige la imagen que más te guste para jugar!
        </div>
        <div id="global-mascot-container" class="mascot-vector-container" aria-hidden="true">
            <!-- El JS llenará esto con tu avatar personalizado -->
        </div>
    </aside>

    <script src="../js/seleccion.js"></script>
</body>
</html>